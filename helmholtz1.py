####This will contain all the equations that will be be needed to calculate the optimal parameter space. 

import numpy as np 
import matplotlib.pyplot as plt 
from scipy import interpolate 
from scipy import integrate

''' I think that we will need to specify N (number of turns in each solenoid), 
    I (current through each solenoid), and r (radius of solenoid) later. '''

####The temperatures for each region of the cryostat
Ta = 300.  #the external temperature of the cryostat (K)
Tb = 50.   #the temperature of the first stage (K)
Tc = 4.    #the temperature of the second stage (K)
Td = 1.    #the temperature of the Helium-4 stage (K)
Te = 0.35  #the temperature of the Helium-3 stage (K)
Tf = 0.1   #the temperature of the detector (servo controlled) (K)


####Common parameters
rho_cu = 1.4  #electrical resistivity of copper 300K-70K (assumed T independant) (micro ohm cm)
mu_0 = 40*np.pi # or 1.257 # micro T m / A
mu_r = 1. # This will need to be experimentally determined later for our cryostat

L = mu_0 * N**2 * A / l # Inductance for each solenoid (
V = L * dI / dt

## To do: How to run all the AWG cross sections through code and generate a table
A = {'4/0': 107., '3/0': 85., '2/0': 67.4, '1/0': 53.5, '1': 42.4, '2': 33.6, '3': 26.7,
		'4': 21.2, '5': 16.8, '6': 13.3, '7': 10.5, '8': 8.37, '9': 6.63, '10': 5.26, '11': 4.17,
		'12': 3.31, '13': 2.62, '14': 2.08, '15': 1.65, '16': 1.31, '17': 1.04, '18': 0.823,
		'19': 0.653, '20': 0.518, '21': 0.410, '22': 0.326, '23': 0.258, '24': 0.205, '25': 0.162,
		'26': 0.129, '27': 0.102, '28': 0.0810, '29': 0.0642, '30': 0.0509, '31': 0.0404, '32': 0.0320,
		'33': 0.0254, '34': 0.0201, '35': 0.0160, '36': 0.0127, '37': 0.0100, '38': 0.00797,
		'39': 0.00632, '40': 0.00501} # American wire gauge (AWG) cross sectional area (mm^2)

for key in A: #for key, value in d.iteritems():
	print key, "corresponds to", A[key]


'''####Joule heating in the Helmholtz coil
# Joule heating (H) = I^2 * R (current^2 * resistance of copper) in W --> Sam
Q_b_joule_heating  = (I_ADR/2)**2*R_b_magnet_leads/(10**6)  #divided current by two since there are two wires for each lead
print "Q_b_joule_heating =",Q_b_joule_heating,"W"'''

def R(l, A):
	''' Calculate the resistance of each solenoid of the Helmholtz coil. '''
	return rho_cu * l / A

def B_0(N, I, r):
	''' Calculate the magnetic field generated by a Helmholtz coil at its center. '''
    return np.sqrt((4/5)**3) * mu_0 * mu_r * N * I / r
    
    
def Q_joule_heating(I):
	''' Calculate the Joule heating for our Helmholtz coil. '''
	return I**2 * R/(10**6)
	
print "B_0 = ", B_0(N, I, r), "T"
print "Q_joule_heating = ", Q_joule_heating(I), "W"
